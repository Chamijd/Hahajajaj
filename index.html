<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>සිංහල DJ රිමික්ස්</title>
    <style>
        :root {
            --deck-a: #FF5722;
            --deck-b: #4CAF50;
            --mixer: #607D8B;
        }
        
        body {
            font-family: 'Roboto', sans-serif;
            background: #121212;
            color: white;
            margin: 0;
            padding: 0;
            touch-action: manipulation;
        }
        
        .app-container {
            max-width: 100%;
            padding: 10px;
        }
        
        .decks {
            display: flex;
            gap: 10px;
        }
        
        .deck {
            flex: 1;
            background: #1E1E1E;
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
        
        .deck-a { border-top: 5px solid var(--deck-a); }
        .deck-b { border-top: 5px solid var(--deck-b); }
        
        .track-info {
            margin-bottom: 10px;
        }
        
        .track-name {
            font-size: 14px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            background: #333;
            padding: 8px;
            border-radius: 8px;
        }
        
        .time-bpm {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #AAA;
            margin-top: 5px;
        }
        
        .waveform {
            height: 80px;
            background: #252525;
            border-radius: 8px;
            margin: 10px 0;
            position: relative;
            overflow: hidden;
        }
        
        .vinyl {
            width: 70px;
            height: 70px;
            background: #222;
            border-radius: 50%;
            margin: 0 auto;
            background-image: radial-gradient(circle, #444 10%, #222 60%, #111 90%);
            border: 2px solid #555;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }
        
        .vinyl::before {
            content: "";
            position: absolute;
            width: 12px;
            height: 12px;
            background: white;
            border-radius: 50%;
            z-index: 2;
        }
        
        .vinyl-img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-size: cover;
            background-position: center;
        }
        
        .deck-controls {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin-top: 15px;
        }
        
        .btn {
            background: #333;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 10px;
            font-size: 12px;
            text-align: center;
            cursor: pointer;
            user-select: none;
        }
        
        .btn:active {
            transform: scale(0.95);
        }
        
        .btn-play {
            background: var(--deck-a);
            color: black;
            grid-column: span 2;
            font-weight: bold;
        }
        
        .deck-b .btn-play {
            background: var(--deck-b);
        }
        
        .btn-cue {
            background: #555;
        }
        
        .btn-sync {
            background: #2196F3;
        }
        
        .btn-fx {
            background: #9C27B0;
        }
        
        .mixer {
            background: #1E1E1E;
            border-radius: 15px;
            padding: 15px;
            margin-top: 15px;
        }
        
        .crossfader {
            width: 100%;
            height: 30px;
            margin: 15px 0;
        }
        
        .crossfader input[type="range"] {
            width: 100%;
            height: 10px;
            -webkit-appearance: none;
            background: linear-gradient(to right, var(--deck-a), #666, var(--deck-b));
            border-radius: 5px;
        }
        
        .eq-controls {
            display: flex;
            justify-content: space-around;
            margin-top: 15px;
        }
        
        .eq-knob {
            text-align: center;
        }
        
        .eq-knob label {
            display: block;
            font-size: 12px;
            margin-bottom: 5px;
        }
        
        .knob {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #333;
            margin: 0 auto;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .spinning {
            animation: spin 2s linear infinite;
        }
    </style>
    <script src="https://unpkg.com/wavesurfer.js"></script>
</head>
<body>
    <div class="app-container">
        <div class="decks">
            <!-- Deck A -->
            <div class="deck deck-a">
                <div class="track-info">
                    <div class="track-name" id="track-name-a">ගීතය තෝරන්න</div>
                    <div class="time-bpm">
                        <span id="time-a">00:00 / 00:00</span>
                        <span>BPM: <span id="bpm-a">0</span></span>
                    </div>
                </div>
                
                <div id="waveform-a" class="waveform"></div>
                
                <div class="vinyl" id="vinyl-a">
                    <div class="vinyl-img" id="vinyl-img-a"></div>
                </div>
                
                <div class="deck-controls">
                    <button class="btn btn-cue" onclick="setCue('a')">CUE</button>
                    <button class="btn" onclick="setHotCue('a', 1)">1</button>
                    <button class="btn" onclick="setHotCue('a', 2)">2</button>
                    <button class="btn" onclick="setHotCue('a', 3)">3</button>
                    <button class="btn btn-play" onclick="playPause('a')">▶️ PLAY</button>
                    <button class="btn btn-sync" onclick="syncBpm('a')">SYNC</button>
                    <button class="btn btn-fx" onclick="toggleFx('a')">FX</button>
                    <button class="btn" onclick="toggleLoop('a')">LOOP</button>
                </div>
            </div>
            
            <!-- Deck B -->
            <div class="deck deck-b">
                <div class="track-info">
                    <div class="track-name" id="track-name-b">ගීතය තෝරන්න</div>
                    <div class="time-bpm">
                        <span id="time-b">00:00 / 00:00</span>
                        <span>BPM: <span id="bpm-b">0</span></span>
                    </div>
                </div>
                
                <div id="waveform-b" class="waveform"></div>
                
                <div class="vinyl" id="vinyl-b">
                    <div class="vinyl-img" id="vinyl-img-b"></div>
                </div>
                
                <div class="deck-controls">
                    <button class="btn btn-cue" onclick="setCue('b')">CUE</button>
                    <button class="btn" onclick="setHotCue('b', 1)">1</button>
                    <button class="btn" onclick="setHotCue('b', 2)">2</button>
                    <button class="btn" onclick="setHotCue('b', 3)">3</button>
                    <button class="btn btn-play" onclick="playPause('b')">▶️ PLAY</button>
                    <button class="btn btn-sync" onclick="syncBpm('b')">SYNC</button>
                    <button class="btn btn-fx" onclick="toggleFx('b')">FX</button>
                    <button class="btn" onclick="toggleLoop('b')">LOOP</button>
                </div>
            </div>
        </div>
        
        <!-- Mixer Section -->
        <div class="mixer">
            <div class="crossfader">
                <input type="range" id="crossfader" min="0" max="100" value="50">
            </div>
            
            <div class="eq-controls">
                <div class="eq-knob">
                    <label>GAIN</label>
                    <div class="knob"></div>
                </div>
                <div class="eq-knob">
                    <label>HIGH</label>
                    <div class="knob"></div>
                </div>
                <div class="eq-knob">
                    <label>MID</label>
                    <div class="knob"></div>
                </div>
                <div class="eq-knob">
                    <label>LOW</label>
                    <div class="knob"></div>
                </div>
            </div>
        </div>
        
        <!-- File Inputs -->
        <div style="display: flex; justify-content: space-around; margin-top: 20px;">
            <button onclick="loadTrack('a')" style="background: var(--deck-a); padding: 10px 15px; border-radius: 8px; border: none; color: black; font-weight: bold;">ඩෙක් A ගීතය</button>
            <button onclick="loadTrack('b')" style="background: var(--deck-b); padding: 10px 15px; border-radius: 8px; border: none; color: black; font-weight: bold;">ඩෙක් B ගීතය</button>
        </div>
    </div>

    <script>
        // Initialize Wavesurfer
        const wavesurferA = WaveSurfer.create({
            container: '#waveform-a',
            waveColor: '#FF5722',
            progressColor: '#FF9800',
            cursorColor: '#FF5722',
            barWidth: 2,
            barRadius: 3,
            barGap: 2,
            height: 80
        });
        
        const wavesurferB = WaveSurfer.create({
            container: '#waveform-b',
            waveColor: '#4CAF50',
            progressColor: '#8BC34A',
            cursorColor: '#4CAF50',
            barWidth: 2,
            barRadius: 3,
            barGap: 2,
            height: 80
        });
        
        // App state
        const state = {
            a: {
                wavesurfer: wavesurferA,
                isPlaying: false,
                cuePoint: 0,
                hotCues: {},
                bpm: 0,
                fxOn: false
            },
            b: {
                wavesurfer: wavesurferB,
                isPlaying: false,
                cuePoint: 0,
                hotCues: {},
                bpm: 0,
                fxOn: false
            },
            crossfader: 50
        };
        
        // Load track function
        function loadTrack(deck) {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'audio/*';
            input.onchange = (e) => {
                const file = e.target.files[0];
                if (file) {
                    const url = URL.createObjectURL(file);
                    state[deck].wavesurfer.load(url);
                    document.getElementById(`track-name-${deck}`).textContent = file.name;
                    document.getElementById(`vinyl-img-${deck}`).style.backgroundImage = `url(https://picsum.photos/200?random=${Date.now()})`;
                    
                    // Simulate BPM detection
                    setTimeout(() => {
                        const randomBpm = Math.floor(Math.random() * 30) + 120;
                        state[deck].bpm = randomBpm;
                        document.getElementById(`bpm-${deck}`).textContent = randomBpm;
                    }, 1000);
                }
            };
            input.click();
        }
        
        // Play/Pause function
        function playPause(deck) {
            if (state[deck].isPlaying) {
                state[deck].wavesurfer.pause();
                state[deck].isPlaying = false;
                document.querySelector(`.deck-${deck} .btn-play`).textContent = '▶️ PLAY';
                document.getElementById(`vinyl-${deck}`).classList.remove('spinning');
            } else {
                state[deck].wavesurfer.play();
                state[deck].isPlaying = true;
                document.querySelector(`.deck-${deck} .btn-play`).textContent = '⏸ PAUSE';
                document.getElementById(`vinyl-${deck}`).classList.add('spinning');
            }
        }
        
        // Set cue point
        function setCue(deck) {
            state[deck].cuePoint = state[deck].wavesurfer.getCurrentTime();
            alert(`CUE සකසා ඇත: ${formatTime(state[deck].cuePoint)}`);
        }
        
        // Set hot cue
        function setHotCue(deck, cueNum) {
            const currentTime = state[deck].wavesurfer.getCurrentTime();
            
            if (state[deck].hotCues[cueNum] === currentTime) {
                // Jump to hot cue
                state[deck].wavesurfer.setCurrentTime(currentTime);
            } else {
                // Set new hot cue
                state[deck].hotCues[cueNum] = currentTime;
                alert(`Hot Cue ${cueNum} සකසා ඇත: ${formatTime(currentTime)}`);
            }
        }
        
        // Sync BPM
        function syncBpm(deck) {
            const otherDeck = deck === 'a' ? 'b' : 'a';
            
            if (state[otherDeck].bpm > 0) {
                state[deck].bpm = state[otherDeck].bpm;
                document.getElementById(`bpm-${deck}`).textContent = state[deck].bpm;
                alert(`BPM සමමුහුර්ත කරන ලදි: ${state[deck].bpm}`);
            } else {
                alert(`පළමුව ${otherDeck.toUpperCase()} ඩෙක් එකේ ගීතයක් ලොඩ් කරන්න`);
            }
        }
        
        // Toggle FX
        function toggleFx(deck) {
            state[deck].fxOn = !state[deck].fxOn;
            alert(`FX ${state[deck].fxOn ? 'සක්‍රිය' : 'අක්‍රිය'} කරන ලදි`);
        }
        
        // Toggle loop
        function toggleLoop(deck) {
            alert(`LOOP ${state[deck].wavesurfer.getCurrentTime()} වෙත සකසා ඇත`);
        }
        
        // Format time
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
        }
        
        // Update time displays
        wavesurferA.on('audioprocess', () => {
            const currentTime = wavesurferA.getCurrentTime();
            const duration = wavesurferA.getDuration();
            document.getElementById('time-a').textContent = `${formatTime(currentTime)} / ${formatTime(duration)}`;
        });
        
        wavesurferB.on('audioprocess', () => {
            const currentTime = wavesurferB.getCurrentTime();
            const duration = wavesurferB.getDuration();
            document.getElementById('time-b').textContent = `${formatTime(currentTime)} / ${formatTime(duration)}`;
        });
        
        // Crossfader control
        document.getElementById('crossfader').addEventListener('input', function() {
            const value = parseInt(this.value);
            state.crossfader = value;
            
            const deckAVolume = value <= 50 ? 1 : 1 - (value - 50) / 50;
            const deckBVolume = value >= 50 ? 1 : value / 50;
            
            wavesurferA.setVolume(deckAVolume);
            wavesurferB.setVolume(deckBVolume);
        });
        
        // Initialize vinyl images
        document.getElementById('vinyl-img-a').style.backgroundImage = 'url(https://picsum.photos/200?random=1)';
        document.getElementById('vinyl-img-b').style.backgroundImage = 'url(https://picsum.photos/200?random=2)';
    </script>
</body>
</html>

ඔක ට තව දෙවල් දාලා😭😭😭 සම්පුර්ණ කොඩ් එකම ඔන 
